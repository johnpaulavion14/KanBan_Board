<div style="height: 90vh;width: 100vw; overflow:scroll; ">
  <table class="table table-hover text-center">
    <thead>
      <tr style="color: #0067a3; border-bottom: 3px solid #0067a3; height: 50px; vertical-align: middle;">
        <th scope="col"></th>
        <th scope="col">Task Name</th>
        <th scope="col">Duration</th>
        <th scope="col">Start</th>
        <th scope="col">Finish</th>
        <th scope="col">Assigned To</th>
        <th scope="col">% Complete</th>
        <th scope="col">Status</th>
        <th scope="col">Remarks</th>
      </tr>
    </thead>
    <tbody>
      <% @rocks.each do |rock| %>
        <!-- All Rocks -->
        <tr class="all-rocks" style="background-color:#cccdd4; font-weight: bold; vertical-align: middle;">
          <td class="notif-con"></td>
          <td style="display: none;" id="rock-id"><%= rock.id %></td>
          <td class="task-name" style="text-align: left; min-width: 100px;">
            <%= image_tag ("plus.png"),role:"button", style:"margin-left:1rem",class:"plus-icon" %>
            <%= image_tag ("minus.png"),role:"button", style:"margin-left:1rem",class:"minus-icon" %>
            <%= rock.task_name %>
          </td>
          <td><%= (rock.finish.to_date - rock.start.to_date).to_i %> days</td>
          <td class="start"><%= rock.start %></td>
          <td class="finish"><%= rock.finish %></td>
          <td class="assigned"><%= rock.assigned %></td>
          <td><span class="complete"><%= rock.complete %></span> %</td>
          <td class="status com-status"><%= rock.status %></td>
          <td class="remarks" style="max-width:200px; overflow-x: auto;"><%= rock.remarks %></td>
        </tr>
        <!-- All Milestones -->
        <% @milestones.each do |milestone| %> 
          <% if rock.id == milestone.rock_id %>
            <tr class="all-milestones rock-<%= rock.id %>" style="vertical-align: middle;">
              <td class="notif-con" >
              </td>
              <td style="display: none;" id="rock-id"><%= rock.id %></td>
              <td style="display: none;" id="milestone-id"><%= milestone.id %></td>
              <td class="task-name" style="text-align: left; min-width: 100px; padding-left:4rem"><%= milestone.task_name %></td>
              <td><%= (milestone.finish.to_date - milestone.start.to_date).to_i %> days</td>
              <td class="start"><%= milestone.start %></td>
              <td class="finish"><%= milestone.finish %></td>
              <td class="assigned"><%= milestone.assigned %></td>
              <td><span class="complete"><%= milestone.complete %></span> %</td>
              <td class="status com-status"><%= milestone.status %></td>
              <td class="remarks" style="max-width:200px; overflow-x: auto;"><%= milestone.remarks %></td>
            </tr>
          <% end %>
        <% end %>
        <tr>
          <td></td>
          <td>-</td>
          <td>-</td>
          <td>-</td>
          <td>-</td>
          <td>-</td>
          <td>-</td>
          <td>-</td>
          <td>-</td>
        </tr>
      <% end %>
    </tbody>
  </table>

</div>

<script>

  $(document).ready(function(){

    // Complete status
    $(".com-status").each( function(index,value) {
      if ($(value).text() == "Complete"){
        $(value).parents("tr").children("td").not(".notif-con").css("text-decoration", "line-through")
      }
    });

    // -----Milestone Section------

    // Show / Hide Milestones
    $(".minus-icon").css("display", "none")
    $(".all-milestones").css("display", "none")
    $(".new-milestone").css("display", "none")
    $(".blank-milestone").css("display", "none")
    $(".plus-icon").each( function(index,plus) {
      $(plus).click(function(){
        $(this).hide()
        $(this).next(".minus-icon").show()
        var id = $(plus).parents(".task-name").siblings("#rock-id").text()
        var rock_id = ".rock-" + id
        $(rock_id).show()
        $(rock_id + ".new-milestone").hide()
      });
    });
    $(".minus-icon").each( function(index,minus) {
      $(minus).click(function(){
        $(this).hide()
        $(this).prev(".plus-icon").show()
        var id = $(minus).parents(".task-name").siblings("#rock-id").text()
        var rock_id = ".rock-" + id
        $(rock_id).hide()
      });
    });
   
  });
  
</script>
